# ğŸ“± Mobile Repair Shop ERP

![Refine](https://img.shields.io/badge/Build_with-Refine-blue?style=flat-square&logo=refine)
![Supabase](https://img.shields.io/badge/Backend-Supabase-green?style=flat-square&logo=supabase)
![Ant Design](https://img.shields.io/badge/UI-Ant_Design-red?style=flat-square&logo=antdesign)

> **åŸºäº Refine + Supabase çš„ç°ä»£åŒ–æ‰‹æœºç»´ä¿®åº—ç®¡ç†ç³»ç»Ÿ**

è¿™æ˜¯ä¸€ä¸ªä¸“ä¸ºæå‡ç»´ä¿®ä¸šåŠ¡æ•ˆç‡è®¾è®¡çš„ ERP ç³»ç»Ÿã€‚é¡¹ç›®å®ç°äº†ä»å®¢æˆ·æ¥å¾…ã€ç»´ä¿®å¼€å•ã€åº“å­˜ç®¡ç†åˆ°è´¢åŠ¡æŠ¥è¡¨çš„å…¨æµç¨‹æ•°å­—åŒ–ç®¡ç†ã€‚å‰ç«¯é‡‡ç”¨ Refine (React) æ„å»ºï¼Œåç«¯ä¾æ‰˜ Supabase (PostgreSQL) å¼ºå¤§çš„æ•°æ®æœåŠ¡ã€‚

---

## âœ¨ æ ¸å¿ƒäº®ç‚¹

- **âš¡ æé€Ÿå¼€å•ä½“éªŒ**ï¼šé‡‡ç”¨åˆ†æ­¥å¼å‘å¯¼ + æ¨¡æ€æ¡†ï¼ˆModalï¼‰è®¾è®¡ã€‚æ— éœ€è·³è½¬é¡µé¢å³å¯åœ¨å¼€å•è¿‡ç¨‹ä¸­å³æ—¶å½•å…¥æ–°å®¢æˆ·ã€æ–°æœºå‹æˆ–æ–°æ•…éšœä¿¡æ¯ã€‚
- **ğŸ”„ è‡ªåŠ¨åŒ–ä¾›åº”é“¾**ï¼šç»´ä¿®å®Œæˆè‡ªåŠ¨æ‰£å‡åº“å­˜ã€è‡ªåŠ¨ç”Ÿæˆä¿ä¿®å•ã€è‡ªåŠ¨è®°å½•åº“å­˜æµæ°´ï¼Œå‘Šåˆ«ç¹ççš„äººå·¥æ ¸é”€ã€‚
- **ğŸš€ é«˜æ€§èƒ½ä»ªè¡¨ç›˜**ï¼šåŸºäº **SQL View** å’Œ **Recharts** æ„å»ºã€‚é€šè¿‡åç«¯é¢„èšåˆæ•°æ®ï¼Œå®ç°æµ·é‡ç»Ÿè®¡æ•°æ®çš„æ¯«ç§’çº§åŠ è½½ã€‚
- **ğŸ¨ ç°ä»£åŒ– UI**ï¼šåŸºäº Ant Design çš„å“åº”å¼è®¾è®¡ã€‚åŒ…å«å·¦ä¾§æ‚¬æµ®å¿«æ·æ“ä½œæ ï¼Œæ”¯æŒæ·±è‰²/æµ…è‰²æ¨¡å¼åˆ‡æ¢ã€‚

---

## ğŸ›  æŠ€æœ¯æ ˆ

| ç±»åˆ«            | æŠ€æœ¯é€‰å‹                      | è¯´æ˜                                 |
| :-------------- | :---------------------------- | :----------------------------------- |
| **å‰ç«¯æ¡†æ¶**    | [Refine](https://refine.dev/) | åŸºäº React & TypeScript çš„ä¼ä¸šçº§æ¡†æ¶ |
| **UI ç»„ä»¶åº“**   | Ant Design                    | ä¸“ä¸šçš„ä¼ä¸šçº§ UI è®¾è®¡è¯­è¨€             |
| **æ•°æ®å¯è§†åŒ–**  | Recharts                      | å¯ç»„åˆçš„ React å›¾è¡¨åº“                |
| **åç«¯/æ•°æ®åº“** | Supabase                      | å¼€æº Firebase æ›¿ä»£å“ (PostgreSQL)    |
| **æ—¥æœŸå¤„ç†**    | Day.js                        | è½»é‡çº§æ—¥æœŸå¤„ç†åº“                     |
| **çŠ¶æ€ç®¡ç†**    | React Query                   | Refine å†…ç½®ï¼Œå¼ºå¤§çš„æœåŠ¡ç«¯çŠ¶æ€ç®¡ç†    |

---

## ğŸš€ åŠŸèƒ½æ¨¡å—è¯¦è§£

### 1. ğŸ“Š ä»ªè¡¨ç›˜ (Dashboard)

å…¨æ–¹ä½çš„ä¸šåŠ¡æŒ‡æŒ¥ä¸­å¿ƒï¼Œé€šè¿‡åç«¯ SQL View é¢„èšåˆæ•°æ®ï¼Œä¿éšœæè‡´æ€§èƒ½ã€‚

- **KPI å¡ç‰‡**: å®æ—¶å±•ç¤ºå¹´åº¦/æœˆåº¦æ”¶å…¥ã€ç»´ä¿®å•é‡ã€åº“å­˜æ€»èµ„äº§ï¼ˆåŒºåˆ†ç»´ä¿®é…ä»¶ä¸é›¶å”®å•†å“ï¼‰ã€å½“å‰ç§¯å‹å·¥å•ã€‚
- **æ•°æ®å¯è§†åŒ–**:
  - **è¥æ”¶è¶‹åŠ¿**: åŒè½´æŠ˜çº¿å›¾ï¼ˆæ”¶å…¥ vs å•é‡ï¼‰ï¼Œæ”¯æŒå¹´ä»½ç­›é€‰ã€‚
  - **çŠ¶æ€åˆ†å¸ƒ**: ç”œç”œåœˆå›¾ç›´è§‚å±•ç¤ºè®¢å•çŠ¶æ€å æ¯”ã€‚
  - **çƒ­é—¨æœºå‹**: Top 5 ç»´ä¿®æœºå‹æ’è¡Œæ¦œï¼ˆé‡‘é“¶é“œå¥–ç‰Œæ ·å¼ï¼‰ã€‚
- **å¿«æ·æ“ä½œ**: å·¦ä¾§å¸¸é©»æ‚¬æµ®å…¥å£ï¼Œå¿«é€Ÿå‘èµ·å¼€å•ã€æ”¶é“¶ã€æŸ¥ä»¶ç­‰é«˜é¢‘æ“ä½œã€‚
- **ä½“éªŒä¼˜åŒ–**: å…¨é¢æ”¯æŒéª¨æ¶å± (Skeleton) åŠ è½½çŠ¶æ€ã€‚

### 2. ğŸ›  ç»´ä¿®è®¢å•ç®¡ç† (Repair Orders)

ç³»ç»Ÿçš„æ ¸å¿ƒä¸šåŠ¡æµå¼•æ“ã€‚

- **æ–°å»ºè®¢å• (Create)**:
  - **åˆ†æ­¥å‘å¯¼**: å®¢æˆ·ä¿¡æ¯ -> è®¾å¤‡æ•…éšœ -> æŠ¥ä»·é…ä»¶ -> ä¿¡æ¯æ ¸å¯¹ã€‚
  - **å³æ—¶åˆ›å»º**: ä¸‹æ‹‰é€‰å•æ”¯æŒç›´æ¥æ–°å»ºå…³è”æ•°æ®ï¼Œå›å¡«æ— ç¼è¡”æ¥ã€‚
  - **è‡ªåŠ¨ç®—ä»·**: é…ä»¶è´¹ + äººå·¥è´¹è‡ªåŠ¨è®¡ç®—ã€‚
- **è®¢å•åˆ—è¡¨ (List)**:
  - **Tab åˆ†ç»„**: è‡ªåŠ¨åŒºåˆ†â€œè¿›è¡Œä¸­ (Active)â€å’Œâ€œå†å²è®°å½• (History)â€ã€‚
  - **çŠ¶æ€æ ‡ç­¾**: å½©è‰² Tag ç›´è§‚å±•ç¤ºè¿›åº¦ã€‚
- **è®¢å•ç¼–è¾‘ (Edit)**:
  - å…¨åŠŸèƒ½æ“ä½œå°ï¼Œæ”¯æŒçŠ¶æ€æµè½¬ã€è¿½åŠ /ç§»é™¤é…ä»¶ã€‚
  - **è‡ªåŠ¨åŒ–è§¦å‘ (Triggers)**:
    - `Completed`: è‡ªåŠ¨æ‰£å‡åº“å­˜ï¼ˆç”Ÿæˆ `stock_entries`ï¼‰ï¼Œè‡ªåŠ¨ç”Ÿæˆä¿ä¿®å•ã€‚
    - `Cancelled`: è‡ªåŠ¨é‡Šæ”¾å·²é¢„é€‰çš„é…ä»¶ã€‚

### 3. ğŸ‘¥ å®¢æˆ·ç®¡ç† (CRM)

- **å®¢æˆ·æ¡£æ¡ˆ**: åŸºç¡€ä¿¡æ¯ç®¡ç†ã€‚
- **ç»´ä¿®å†å²**: è¯¦æƒ…é¡µå…³è”å±•ç¤ºè¯¥å®¢æˆ·æ‰€æœ‰çš„å†å²ç»´ä¿®è®°å½•ã€æ¶ˆè´¹é‡‘é¢åŠè®¾å¤‡ä¿¡æ¯ã€‚

### 4. ğŸ“¦ åº“å­˜ä¸ä¾›åº”é“¾ (Inventory)

- **åŒè½¨åˆ¶åº“å­˜**:
  - `inventory_components`: ç»´ä¿®ä¸“ç”¨é…ä»¶ï¼ˆå±å¹•ã€ç”µæ± ç­‰ï¼‰ï¼Œå¼ºå…³è”æœºå‹ã€‚
  - `inventory_items`: é›¶å”®å•†å“ï¼ˆæ‰‹æœºå£³ã€æ•°æ®çº¿ç­‰ï¼‰ï¼Œç›´æ¥é”€å”®ã€‚
- **å‡ºå…¥åº“ç®¡ç†**: é€šè¿‡ `stock_entries` è®°å½•æ‰€æœ‰å˜åŠ¨ï¼ˆè¿›è´§ã€ç»´ä¿®æ¶ˆè€—ã€æŸè€—ã€ç›˜ç‚¹ï¼‰ï¼Œåº“å­˜æœ‰æ®å¯æŸ¥ã€‚

### 5. âš¡ï¸ æé€ŸæŠ¥ä»· (Quick Quote)

- å•æœç´¢æ¡†è®¾è®¡ï¼Œè¾“å…¥æœºå‹ï¼ˆå¦‚ "13 Pro"ï¼‰å³å¯å¿«é€ŸæŸ¥è¯¢æ‰€æœ‰å…¼å®¹é…ä»¶çš„ç»´ä¿®ä»·æ ¼ï¼ˆåŸè£…/å‰¯å‚ï¼‰åŠå½“å‰åº“å­˜çŠ¶æ€ã€‚

---

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡ (Supabase)

é¡¹ç›®å¤§é‡åˆ©ç”¨ PostgreSQL çš„ç‰¹æ€§æ¥ä¿è¯æ•°æ®ä¸€è‡´æ€§å’Œæ€§èƒ½ã€‚

### å…³é”®è¡¨ç»“æ„

- `repair_orders`: ç»´ä¿®ä¸»è¡¨
- `repair_order_parts`: ç»´ä¿®è€—ææ˜ç»†ï¼ˆå…³è”è¡¨ï¼‰
- `inventory_components` / `inventory_items`: åº“å­˜è¡¨
- `stock_entries` / `stock_entry_items`: åº“å­˜æµæ°´è¡¨
- `warranties`: ä¿ä¿®å•è¡¨

### è‡ªåŠ¨åŒ–é€»è¾‘ (Database Functions & Triggers)

1.  **`handle_repair_status_change`**: ç›‘å¬ç»´ä¿®å•çŠ¶æ€ã€‚
    - å®Œæˆæ—¶ -> æ’å…¥ `warranties`ï¼Œæ’å…¥ `stock_entries` (Type: Repair)ã€‚
    - å–æ¶ˆæ—¶ -> æ¸…ç† `repair_order_parts`ã€‚
2.  **`update_inventory_from_entry`**: ç›‘å¬ `stock_entry_items`ï¼Œè‡ªåŠ¨åŠ å‡åº“å­˜æ•°é‡ã€‚
3.  **`check_and_expire_warranties`**: (é…åˆ pg_cron) æ¯æ—¥å®šæ—¶ä»»åŠ¡ï¼Œè‡ªåŠ¨æ ‡è®°è¿‡æœŸä¿ä¿®å•ã€‚

### æ€§èƒ½ä¼˜åŒ– (SQL Views)

- `dashboard_yearly_stats`: å¹´åº¦è¥æ”¶èšåˆ
- `dashboard_monthly_stats`: æœˆåº¦è¶‹åŠ¿èšåˆ
- `dashboard_inventory_summary`: åº“å­˜èµ„äº§åˆ†ç±»æ±‡æ€»
- `dashboard_top_models`: æœºå‹çƒ­åº¦ç»Ÿè®¡

---

## ğŸ å¼€å§‹ä½¿ç”¨ (Getting Started)

### 1. å…‹éš†é¡¹ç›®

```bash
git clone [https://github.com/your-username/mobile-repair-erp.git](https://github.com/your-username/mobile-repair-erp.git)
cd mobile-repair-erp

npm install

```

### åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ Supabase é…ç½®ï¼š

```bash
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_KEY=your_supabase_anon_key
```

### è¿è¡Œé¡¹ç›®

```bash

npm run dev

```
